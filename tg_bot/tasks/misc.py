from ..base import DISPATCHER
from ai import get_user
from aiogram.types import CallbackQuery, Message


HELP_ANSWER_TEXT = """–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç–∞, {full_name}!

–≠—Ç–æ—Ç –±–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è *—Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞* –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º –Ω–µ–π—Ä–æ–Ω–Ω—ã–º –º–æ–¥–µ–ª—è–º, –≤–∫–ª—é—á–∞—è:
- –û–±—Ä–∞–±–æ—Ç–∫—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ

*–¢–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è*
–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã.
–ö–∞–∂–¥—ã–π —à–∞–≥ –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –º–æ–¥–µ–ª–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥.
–ï—Å–ª–∏ –≤—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `reply`, —Ç–æ –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∏—Ç —Å—É–∂–µ–Ω–Ω—É—é –ø–µ—Ä–µ–ø–∏—Å–∫—É –¥–æ –¥–∞–Ω–Ω–æ–≥–æ —à–∞–≥–∞.

*–ê–Ω–∞–ª–∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π*
–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –æ–±—ã—á–Ω–æ–π _—Ç–µ–∫—Å—Ç–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏_.
–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–π—Ç–µ –≤–∞—à —Ñ–∞–π–ª –∏–ª–∏ —Ñ–æ—Ç–æ –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.

*–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π*
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/image`, —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–∏–∞–ª–æ–≥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏.

*–ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ*
–ö–æ–º–∞–Ω–¥–∞ `/web_search` –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–æ–±–∞–≤–∏—Ç –≤ –º–æ–¥–µ–ª—å —Ñ–ª–∞–≥ –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Å–µ—Ç–∏.
–¢–∞–∫–∂–µ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞—à–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞, –∫–∞–∫ –∏ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π _—Ç–µ–∫—Å—Ç–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏_.

*–ü—Ä–æ—á–µ–µ*
- `/reset` - —Å–±—Ä–æ—Å–∏—Ç—å –¥–∏–∞–ª–æ–≥ –∏–∑ –ø–∞–º—è—Ç–∏ –º–æ–¥–µ–ª–∏
- `/personal_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –ø–æ–¥ —Å–µ–±—è

–í –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã..."""


@DISPATCHER.message_handler(commands=["start", "help"], state="*")
async def handle_start_help_command(message: Message):
    await message.reply(
        text=HELP_ANSWER_TEXT.format(full_name=get_user(message.from_user.id).user_full_name), parse_mode="Markdown"
    )


@DISPATCHER.callback_query_handler(text="TODO", state="*")
async def handle_todo_callback(callback: CallbackQuery):
    await callback.answer("üë∑–î–∞–Ω–Ω—ã–π –±–ª–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...", show_alert=True)


@DISPATCHER.callback_query_handler(state="*")
async def handle_unknown_callback(callback: CallbackQuery):
    await callback.answer(f"Unknown callback: '{callback.data}'", show_alert=True)


@DISPATCHER.edited_message_handler(state="*")
async def handle_edited_message(message: Message):
    await message.reply("""üö´–í—ã –≤–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ *–ù–ï –ü–†–ï–î–£–°–ú–û–¢–†–ï–ù–ê* —Ç–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è(
    \n–ú–æ–¥–µ–ª—å *–ù–ï –£–í–ò–î–ò–¢* –≤–∞—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π. –î–ª—è –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â—ë –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ""", parse_mode="Markdown")
